<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>出遊熊百岳｜抽山集卡</title>

  <!-- PWA (你若已有 webmanifest，就直接沿用檔名即可) -->
  <link rel="manifest" href="./travel-manifest.webmanifest">
  <meta name="theme-color" content="#f4a63a">
  <link rel="apple-touch-icon" href="./icons/icon-192.png">

  <link rel="stylesheet" href="./style.css" />
</head>
<body>
  <div class="app-wrap">

    <!-- Header -->
    <header class="topbar card">
      <div class="avatar" id="bearAvatar" title="點我換一句熊熊小語">
        <!-- 可放 Images/bear.png（可選），沒放就用 emoji -->
        <img id="bearImg" src="./Images/bear.png" alt="熊熊" onerror="this.style.display='none'; document.getElementById('bearEmoji').style.display='grid';">
        <div id="bearEmoji" class="avatar-fallback" style="display:none;">🐻</div>
      </div>

      <div class="topbar-main">
        <div class="title">出遊熊百岳</div>
        <div class="sub">
          <span class="pill" id="todayStatus">⛰️ 今日狀態：準備出發</span>
          <span class="pill ok" id="progressPill">✅ 0 / 100</span>
        </div>
      </div>
    </header>

    <!-- Progress -->
    <section class="card progress-card">
      <div class="row between">
        <div class="h2">登山進度</div>
        <div class="muted" id="progressText">0 / 100</div>
      </div>
      <div class="progress">
        <div class="progress-bar" id="progressBar" style="width:0%"></div>
      </div>
      <div class="muted small">每征服 10 座會解鎖祝賀卡 🎉（可匯出 IG 圖）</div>
    </section>

    <!-- Bear Quote bubble -->
    <section class="card quote-card">
      <div class="quote-line">
        <span class="chip">🐻 熊熊說</span>
        <span class="muted small">提示：長按可複製小語</span>
      </div>
      <div class="quote" id="bearQuote">把安全放第一名，你就已經是高手了。</div>
    </section>

    <!-- Pages -->
    <main class="pages">

      <!-- Page: 抽山 -->
      <section class="page" id="pageDraw">
        <div class="card">
          <div class="h2">今天想挑戰哪種路線？</div>

          <label class="toggle">
            <input type="checkbox" id="collectMode" checked />
            <span>集卡模式（征服後不再抽）</span>
          </label>

          <div class="route-list">
            <button class="route-card" data-diff="beginner">
              <div class="route-ico">🎒</div>
              <div class="route-text">
                <div class="route-title">新手百岳</div>
                <div class="route-sub">親民路線，慢慢走也很棒</div>
              </div>
              <div class="chev">›</div>
            </button>

            <button class="route-card" data-diff="intermediate">
              <div class="route-ico blue">🥾</div>
              <div class="route-text">
                <div class="route-title">進階挑戰</div>
                <div class="route-sub">體能與準備更重要</div>
              </div>
              <div class="chev">›</div>
            </button>

            <button class="route-card warn" data-diff="advanced">
              <div class="route-ico warn">⚠️</div>
              <div class="route-text">
                <div class="route-title">熊熊提醒：需帶隊</div>
                <div class="route-sub">曝險／迷途風險較高</div>
              </div>
              <div class="chev">›</div>
            </button>
          </div>

          <div class="btn-row">
            <button class="btn ghost" id="btnOpenHistory">📜 抽卡紀錄</button>
            <button class="btn primary" id="btnDrawAny">🎲 讓出遊熊幫我選</button>
          </div>

          <div class="safe-strip">
            ⚠️ 高山不是遊樂場，能平安回家才是最棒的冒險 🐻
          </div>
        </div>

        <!-- Result card -->


        <!-- Emergency card -->
        <section class="card emergency-card">
          <div class="h2">緊急狀況</div>
          <div class="em-row">
            <button class="btn danger" id="btnCall119">📞 山難求助電話</button>
            <button class="btn" id="btnFirstAid">🩹 急救教學</button>
          </div>
          <div class="muted small">
            提醒：若可撥通，<b>119</b>（消防／救護）與 <b>112</b>（手機緊急）通常是優先選擇。
          </div>
        </section>
      </section>

      <!-- Page: 百岳 -->
      <section class="page" id="pageList" style="display:none;">
        <div class="card">
          <div class="row between">
            <div class="h2">百岳清單</div>
            <div class="muted small" id="listHint">可勾選已征服（集卡模式會排除）</div>
          </div>

          <div class="list-tools">
            <input class="search" id="searchBox" placeholder="搜尋山名（例如：玉山、合歡）" />
            <select class="select" id="filterDiff">
              <option value="all">全部難度</option>
              <option value="beginner">新手</option>
              <option value="intermediate">進階</option>
              <option value="advanced">需帶隊</option>
            </select>
          </div>

          <div id="mountList" class="mount-list">
            <div class="muted">載入中...</div>
          </div>
        </div>
      </section>

      <!-- Page: 日記 -->
      <section class="page" id="pageDiary" style="display:none;">
        <div class="card">
          <div class="h2">勇者日記</div>
          <div class="muted small">你可以寫一句今天的心情，會跟抽卡一起存起來。</div>

          <textarea class="textarea" id="diaryInput" placeholder="例如：今天走得很慢，但我有照顧好自己。"></textarea>
          <div class="btn-row">
            <button class="btn primary" id="btnSaveDiary">💾 儲存今天心情</button>
            <button class="btn ghost" id="btnExportHistory">📸 匯出抽卡紀錄圖</button>
          </div>

          <div class="h3">最近 3 筆紀錄</div>
          <div id="diaryPreview" class="history-mini"></div>
        </div>
      </section>

      <!-- Page: 設定 -->
      <section class="page" id="pageSettings" style="display:none;">
        <div class="card">
          <div class="h2">設定</div>
          <div class="settings">
            <button class="btn ghost" id="btnReset">🧹 清除本機資料（進度/紀錄）</button>
            <div class="muted small">
              （只會清除你的手機本機 localStorage，不會影響 GitHub 上的檔案。）
            </div>
          </div>

          <div class="divider"></div>
          <div class="muted small">
            IG：<b>@luckygbear</b>（匯出圖可自行貼到 IG 分享）
          </div>
        </div>
      </section>

    </main>

    <!-- Bottom nav -->
    <nav class="bottom-nav card">
      <button class="nav-item active" data-page="Draw">
        <div class="nav-ico">🧧</div><div class="nav-txt">抽山</div>
      </button>
      <button class="nav-item" data-page="List">
        <div class="nav-ico">🏔️</div><div class="nav-txt">百岳</div>
      </button>
      <button class="nav-item" data-page="Diary">
        <div class="nav-ico">📒</div><div class="nav-txt">日記</div>
      </button>
      <button class="nav-item" data-page="Settings">
        <div class="nav-ico">⚙️</div><div class="nav-txt">設定</div>
      </button>
    </nav>
  </div>

  <!-- MODALS -->
  <div class="modal" id="modal">
    <div class="modal-sheet card">
      <div class="modal-head">
        <div class="modal-title" id="modalTitle">標題</div>
        <button class="btn mini ghost" id="modalClose">關閉</button>
      </div>
      <div class="modal-body" id="modalBody"></div>
      <div class="modal-foot" id="modalFoot"></div>
    </div>
  </div>

  <script src="./script.js"></script>
</body>
</html>